# 程序分层

app：由koa框架完成

router：使用异步写法，在router中确定路由

controller：确定具体返回页

model：页面模板



## 前端需要

登录(检查浏览器中是否存在cookie，如果存在正确的cookie，后端通知已登录；如果未存在cookie，则浏览器通过axios发送请求给后端，后端通过验证后发送cookie（uid）给前端)

对于数据进行请求，然后进行渲染。

有下拉栏进行选择，选择数据，如果未登录不可以进行修改，如果已经登录，则可以凭借cookie来进行修改数据

统计信息的话，直接渲染表格



## 表结构定义

1. 基本工种表

   > id
   >
   > 职位名称
   >
   > 基本工资

2. 基本部门表

   > id
   >
   > 部门名称
   >
   > 部门津贴

3. 加班类型表

   > id
   >
   > 加班类型
   >
   > 加班时长	
   >
   > 加班津贴
   >
   > 外键 员工id

4. 员工表

   > id
   >
   > 姓名
   >
   > 性别
   >
   > 工资
   >
   > 外键 基本工种
   >
   > 外键 基本部门

基本工种表和基本部门表多对多

加班类型直接进行记录，外键员工id

## 展示思路

echarts显示到岗百分比，再具体显示缺岗原因


## 数据库api
需要的功能
1. 获取全部部门
   > 获取该部门下所有成员
   > 从该部门下修改成员部门(通过修改外键)
   > 删除该部门（必须将所有该部门下的用户转到别的部门才允许删除）
2. 获取全部工种
   > 获取该工种下所有成员
   > 修改该工种下成员的工种
3. 获取加班表
   > 通过查员工号来查询加班信息
   > 修改加班信息
   > 删除加班信息（直接删除就可以，不需要考虑外键）
4. 获取某员工的该月所有的出勤信息
5. 某员工自己所有信息展示
   > 展示该员工所有的基础信息
   > 展示该员工的出勤信息
   > 展示加班情况（柱状图
   > 展示该员工的年度工资（柱状图
6. 删除员工(不仅需要删除员工的记录，还需要删除对应的加班数据和缺勤数据)
api:

   ```json
   /api/:

   get: /department
   [
      {}
   ]

   get: /position
   {}
   [
      {}
   ]

   post: /department/departmentId
   {
      "departmentId": "int"
   }

   post /position/positionId
   {
      "positionId": "int"
   }

   
   ```


















